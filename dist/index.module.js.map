{"version":3,"file":"index.module.js","sources":["../src/index.js"],"sourcesContent":["import fetchJsonp from 'fetch-jsonp';\n\nlet loadedOnce, file_append;\n\nconst fetchgist = async (url) => {\n    const response = await fetchJsonp(url);\n    const json = await response.json();\n    return json\n    \n}   \n\nconst stylesheet_manager = (css_url) => {\n    if (loadedOnce) return\n    const head = document.getElementsByTagName('head')[0]\n    const link = document.createElement('link')\n    link.rel = \"stylesheet\"\n    link.type = 'text/css';\n    link.href = css_url;\n    link.media = \"all\";\n    head.appendChild(link);\n    loadedOnce = true\n}\n\nasync function gistLoader() {\n\n    const gist_array = document.querySelectorAll('[data-gist]');\n\n    if (gist_array) {\n        for (const div of gist_array) {\n            if (div.dataset.file) {\n                file_append = `?file=${div.dataset.file}`\n            } else {file_append = '';}\n            const gist_url = div.dataset.gist + \".json\" + file_append;\n            const gist_obj = await fetchgist(gist_url);\n            const content = await gist_obj.div;\n            \n            div.innerHTML = content\n            div.classList = \"gist_embed\"\n            \n            const stylesheet_url = await gist_obj.stylesheet;\n\n            stylesheet_manager(stylesheet_url);\n\n            }\n    }\n\n};\n\n/**\n * gistLoader is a simple function which loads Github gists \n * in async manner after the document DOM was already rendered/changed\n * \n * To render the gist content, the script expects the folliwing\n * markup: `<div data-gist=\"https://gist.github.com/someuser/34261e6026oi4c303c40c6ece9961182\" data-file=\"part_one.sh\">`\n * Attr:\n * [data-gist] - the url of your Gist from the embed code *required\n * [data-file] - name of the file in a gist if you'd like to render only a part of it *optional\n * Id doesn't require any arguments, but expected to be run\n * on the client-side, when DOM API is available.\n */\nexport default gistLoader;"],"names":["Symbol","iterator","_settle","pact","state","value","s","_Pact","o","bind","v","then","observer","loadedOnce","prototype","onFulfilled","onRejected","result","this","callback","e","_this","_isSettledPact","thenable","gist_array","document","querySelectorAll","target","body","check","_iteratorSymbol","step","reject","_cycle","next","done","_fixup","TypeError","values","i","length","push","array","_forTo","div","url","fetchJsonp","response","json","fetchgist","dataset","gist","file","gist_obj","content","innerHTML","classList","stylesheet","stylesheet_url","css_url","head","getElementsByTagName","link","createElement","rel","type","href","media","appendChild","stylesheet_manager"],"mappings":"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"}